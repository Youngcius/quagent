# Systematic Design of Quagent

## Hardware Layout

### Current hardware resources

- high-quality EPs (5 kinds of telecom entangled photons)

- 5×16 & 8×8 fiber switches (for routing control)

- 1 SNSPD (8 channels)

- 1 Time Tagger (ultimate counting device with 8 channels)

### Channel Linkage with Fiber Switches

As for the connection capability of our platform, obviously it can support maximum 16 user nodes (16 lab platforms),
each with 5 EPs channels & 4 SNSPD channels linked to fiber switches.

![switch-linkage](../images/switch-linkage.png)

## Font-end & Back-end Technologies

Unlike a classic Web or Web-based software, dominant points of our system is the back-end logic and other supporting
technologies like data visualization.

### Choices & Reasons

- Django: A popular back-end business framework based on Python
- Echarts: A powerful, interactive charting and visualization library for browser, base on JavaScript
- MySQL: Most popular open-source relational database management system
- Axios: Asynchronous request tool library of AJAX
- Semantic UI: A development framework that helps create beautiful, responsive layouts using human-friendly HTML

Django ..... Particularly, data acquired by the counting device could be not only easily shown on the Web dashboard, but
real-timely downloaded to users, in form of JSON files.

ECharts ...... In the `monitor` module, JavaScript-based ECharts library is used to implement geographical information
visualization, integrated with Google Maps APIs. In the `acquire` module, the series of measurement results are shown
via Python-based PyECharts, in forms of histogram, countrate and other figures. This is taken into account to for more
convenient when writing back-end processing logics.

MySQL is the most popular relational database management system at present. It is widely used in small and medium-sized
websites on the Internet. It has the advantages of small volume, fast speed and low overall cost of ownership. This
project involves multiple data tables. MySQL is a good choice. In fact, only on the final distribution stage we will use
MySQL. While in the development and testing stage, we just use the built-in database SQLite of Django, just for
convenience.

## Software Architecture

This software consists of four modules:

- `acquire`: data acquisition functionalities
- `hubinfo`: information query and parameter configuration, as the first step for users' operation
- `monitor`: one part of back-end management system

### Functionalities of modules

#### 1. `acquire` module

```text
acquire
├── __init__.py: in this script, global variable "tagger" gets initialized by Swabian TimeTagger API
├── measurement
│   ├── strategy.md
│   ├── views_correlation.py
│   ├── views_countbetweenmarkers.py
│   ├── views_counter.py
│   ├── views_histogram.py
│   ├── views_startstop.py
│   └── views_timedifferences.py
├── admin.py: built-in ..., automatically generated by Django
├── apps.py: built-in ..., automatically generated by Django
├── gene_eps_spd.py: TODO: delete this
├── globvar.py: global variables, like "tagger" and a series of dynamic dictionary data consisting of user-specific measurement cases 
├── models.py: , automatically generated by Django
├── urls.py: routing function
├── utils.py: a set of directed utility functions for this module
└── views.py: view functions, as processing implementation of routing functions from urls.py
```

For the detailed implementation strategy of user-specific measurement instances, please refer to [quagent/acquire/measurement/strategy.md](E:/Git-projects/quagent/acquire/measurement/strategy.md).
TODO: modify this folder 


**2. `hubinfo` module**

**3. `monitor` module**

### Design mode

- Single-case mode: we use `globvar.py` to store the dominant abstracted variables ...
-

## Scheduling Strategy of Quagent

![quagent-shceduling](../images/strategy-with-ilab.png)

## Reference and Tools

软件设计文档例子：https://github.com/SYSUMonkeyEye/MonkeyEye-Doc/blob/master/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3.md


